#!/usr/bin/env python

import os, sys, libkludge

# if not os.environ.get('KLUDGE_LLVM_ROOT'):
#   print "Missing KLUDGE_LLVM_ROOT environment variabling; exiting."
#   sys.exit(1)
# sys.path.append(os.path.join(os.environ['KLUDGE_LLVM_ROOT'], 'lib', 'python'))
# print sys.path

def global_usage():
  print """KLUDGE: KL wrapping tool

Global usage:

%s %s
  %s

Run %s <command> --help for more details of each command""" % (
  sys.argv[0],
  libkludge.gen.usage,
  libkludge.gen.description,
  sys.argv[0],
  )
  sys.exit(1)

if len(sys.argv) < 2:
  global_usage()
elif sys.argv[1] == 'gen':
  libkludge.gen.main(sys.argv[0], sys.argv[2:])
else:
  print "Unrecognized command: %s" % sys.argv[1]
  global_usage()
